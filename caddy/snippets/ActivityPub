# ActivityPub
# Proxy activitypub requests /.ghost/activitypub/
handle /.ghost/activitypub/* {
	reverse_proxy {$ACTIVITYPUB_TARGET} {
      header_up Host {http.request.host}
      header_up X-Forwarded-Proto {http.request.header.X-Forwarded-Proto}
      header_up X-Forwarded-Host  {http.request.header.Host}
    }
}

handle /.well-known/webfinger {
	reverse_proxy {$ACTIVITYPUB_TARGET} {
      header_up Host {http.request.host}
      header_up X-Forwarded-Proto {http.request.header.X-Forwarded-Proto}
      header_up X-Forwarded-Host  {http.request.header.Host}
    }
}

handle /.well-known/nodeinfo {
	reverse_proxy {$ACTIVITYPUB_TARGET} {
      header_up Host {http.request.host}
      header_up X-Forwarded-Proto {http.request.header.X-Forwarded-Proto}
      header_up X-Forwarded-Host  {http.request.header.Host}
    }
}
